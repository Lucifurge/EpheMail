<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TempMail - Temporary Email Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* Global Styles */
    body {
      font-family: 'Roboto', sans-serif;
      background: #1e1e1e;
      color: #d4d4d4;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }

    /* Navbar */
    .navbar {
      width: 100%;
      padding: 15px;
      background: #252526;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    .navbar h1 {
      color: #569cd6;
      font-family: 'Source Code Pro', monospace;
      margin: 0;
      text-shadow: 0 0 10px #569cd6;
    }
    .navbar button {
      background-color: #3c3c3c;
      border: 1px solid #569cd6;
      padding: 10px 20px;
      color: #dcdcaa;
      cursor: pointer;
      font-size: 1rem;
      border-radius: 5px;
      transition: 0.3s;
    }
    .navbar button:hover {
      background-color: #569cd6;
      color: white;
      box-shadow: 0 0 15px #569cd6;
    }

    /* Content */
    .container {
      width: 100%;
      max-width: 1000px;
      padding: 20px;
      margin-top: 20px;
      text-align: center;
    }
    .section-title {
      font-size: 2rem;
      margin-bottom: 20px;
      color: #569cd6;
    }

    .output {
      background: #252526;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      color: #9cdcfe;
      font-family: 'Source Code Pro', monospace;
      margin-top: 20px;
      min-height: 100px;
    }

    /* Email List Styles */
    .email-list {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }
    .email-item {
      background: #2a2a2a;
      border-radius: 8px;
      padding: 15px;
      transition: 0.3s;
      cursor: pointer;
    }
    .email-item:hover {
      background-color: #569cd6;
      box-shadow: 0 0 15px #569cd6;
    }
    .email-item h3 {
      color: #dcdcaa;
      font-size: 1.1rem;
    }
    .email-item p {
      color: #c8c8c8;
      font-size: 0.9rem;
    }

    /* Animation */
    @keyframes glowing {
      0% { text-shadow: 0 0 5px #569cd6, 0 0 10px #569cd6, 0 0 20px #569cd6, 0 0 30px #569cd6; }
      50% { text-shadow: 0 0 10px #569cd6, 0 0 20px #569cd6, 0 0 30px #569cd6, 0 0 40px #569cd6; }
      100% { text-shadow: 0 0 5px #569cd6, 0 0 10px #569cd6, 0 0 20px #569cd6, 0 0 30px #569cd6; }
    }
    .neon-text {
      animation: glowing 1.5s infinite alternate;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <h1 class="neon-text">TempMail</h1>
    <div>
      <button id="createEmailBtn">Generate Temporary Email</button>
      <button id="inboxBtn">Inbox</button>
    </div>
  </div>

  <div class="container">
    <h2 class="section-title">Welcome to TempMail</h2>
    <div id="content"></div>
    <div id="output" class="output">Output will appear here...</div>
  </div>

  <script>
    const apiBaseUrl = "https://eppheapi-production.up.railway.app/api"; // Your deployed API URL
    const outputDiv = document.getElementById('output');
    const contentDiv = document.getElementById('content');
    
    // Generate Temporary Email
    document.getElementById('createEmailBtn').addEventListener('click', async () => {
      outputDiv.innerHTML = 'Generating a temporary email...';
      try {
        const response = await fetch(`${apiBaseUrl}/create-email`);
        const data = await response.json();
        const email = data.email;
        outputDiv.innerHTML = `Temporary Email Created: <strong>${email}</strong>`;
      } catch (error) {
        outputDiv.innerHTML = `Error: ${error.message}`;
      }
    });

    // Fetch Inbox
    document.getElementById('inboxBtn').addEventListener('click', async () => {
      outputDiv.innerHTML = 'Loading inbox...';
      try {
        const response = await fetch(`${apiBaseUrl}/emails`);
        const emails = await response.json();
        
        contentDiv.innerHTML = '<h3>Inbox</h3>';
        const emailList = document.createElement('div');
        emailList.classList.add('email-list');
        
        emails.forEach(email => {
          const emailItem = document.createElement('div');
          emailItem.classList.add('email-item');
          emailItem.innerHTML = `
            <h3>${email.subject}</h3>
            <p>From: ${email.sender}</p>
            <p>Preview: ${email.preview}</p>
          `;
          emailItem.addEventListener('click', () => showEmailDetails(email.id));
          emailList.appendChild(emailItem);
        });
        
        contentDiv.appendChild(emailList);
        outputDiv.innerHTML = 'Inbox loaded successfully!';
      } catch (error) {
        outputDiv.innerHTML = `Error: ${error.message}`;
      }
    });

    // Show Email Details
    const showEmailDetails = async (emailId) => {
      outputDiv.innerHTML = 'Loading email details...';
      try {
        const response = await fetch(`${apiBaseUrl}/email/${emailId}`);
        const email = await response.json();
        
        contentDiv.innerHTML = `
          <h3>${email.subject}</h3>
          <p><strong>From:</strong> ${email.sender}</p>
          <p><strong>Body:</strong> ${email.body}</p>
        `;
        
        outputDiv.innerHTML = 'Email details loaded successfully!';
      } catch (error) {
        outputDiv.innerHTML = `Error: ${error.message}`;
      }
    };
  </script>
</body>
</html>
